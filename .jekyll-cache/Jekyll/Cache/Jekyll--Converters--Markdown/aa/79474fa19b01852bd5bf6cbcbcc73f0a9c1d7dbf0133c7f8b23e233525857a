I"È2<p><a href="https://jsfiddle.net/edith_tang/wu456nxe/3/">å®Œæ•´çš„ä»£ç </a></p>

<p>ç»„ä»¶çš„åŠŸèƒ½ï¼š</p>

<p>æ‰€æœ‰çš„ä¿¡æ¯éƒ½åœ¨<code class="language-plaintext highlighter-rouge">index.html</code>æä¾›ï¼ŒåŒ…æ‹¬ï¼š</p>

<table>
  <tbody>
    <tr>
      <td>1</td>
      <td>é»˜è®¤é€‰ä¸­æ ‡ç­¾å€¼ (activeKey)</td>
      <td>å†™å…¥<code class="language-plaintext highlighter-rouge">index.html</code>çš„Vueå®ä¾‹çš„æ•°æ®ä¸­ï¼Œé€šè¿‡<code class="language-plaintext highlighter-rouge">v-model</code>è¿›è¡ŒåŒå‘æ•°æ®ä¼ è¾“</td>
    </tr>
    <tr>
      <td>2</td>
      <td>æ ‡ç­¾æ–‡å­—</td>
      <td>ç»‘å®šåœ¨<code class="language-plaintext highlighter-rouge">pane</code>ç»„ä»¶æ ‡ç­¾ä¸Šï¼Œä¼ é€’ç»™<code class="language-plaintext highlighter-rouge">pane</code>ç»„ä»¶</td>
    </tr>
    <tr>
      <td>3</td>
      <td>æ ‡ç­¾ ID</td>
      <td>ç»‘å®šåœ¨<code class="language-plaintext highlighter-rouge">pane</code>ç»„ä»¶æ ‡ç­¾ä¸Šï¼Œä¼ é€’ç»™<code class="language-plaintext highlighter-rouge">pane</code>ç»„ä»¶</td>
    </tr>
    <tr>
      <td>4</td>
      <td>æ ‡ç­¾æ­£æ–‡</td>
      <td>ç›´æ¥å†™å…¥ç»„ä»¶æ ‡ç­¾<code class="language-plaintext highlighter-rouge">&lt;pane&gt;</code>ä¸­é—´ï¼Œæ‰€ä»¥éœ€è¦åœ¨<code class="language-plaintext highlighter-rouge">pane</code>ç»„ä»¶ä¸­è¿›è¡Œå¼€æ§½</td>
    </tr>
    <tr>
      <td>5</td>
      <td>ä¸º<code class="language-plaintext highlighter-rouge">&lt;pane&gt;</code>æ ‡ç­¾å¼€æ§½</td>
      <td><code class="language-plaintext highlighter-rouge">&lt;pane&gt;</code>ç»„ä»¶æ ‡ç­¾æ’å…¥åœ¨<code class="language-plaintext highlighter-rouge">&lt;tabs&gt;</code>ç»„ä»¶æ ‡ç­¾ä¸­ï¼Œæ‰€ä»¥åŒæ ·éœ€è¦åœ¨<code class="language-plaintext highlighter-rouge">tabs</code>ç»„ä»¶çš„æ¨¡æ¿ä¸­å¼€æ§½</td>
    </tr>
  </tbody>
</table>

<h2 id="æ­¥éª¤ä¸€indexhtmlçš„domç»“æ„">æ­¥éª¤ä¸€ï¼š<code class="language-plaintext highlighter-rouge">index.html</code>çš„<code class="language-plaintext highlighter-rouge">DOM</code>ç»“æ„</h2>

<p><code class="language-plaintext highlighter-rouge">index.html</code>çš„<code class="language-plaintext highlighter-rouge">DOM</code>ç»“æ„ï¼Œä»¥åŠåˆ›å»º Vue å®ä¾‹ï¼ŒæŒ‚è½½ä¸Šå»ã€‚</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"app"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!--  1--&gt;</span>
  <span class="nt">&lt;tabs</span> <span class="na">v-model=</span><span class="s">"activeValue"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- 2 &amp; 3 &amp; 4--&gt;</span>
    <span class="nt">&lt;pane</span> <span class="na">label=</span><span class="s">"æ ‡ç­¾ä¸€"</span> <span class="na">name=</span><span class="s">"1"</span><span class="nt">&gt;</span>æ ‡ç­¾ä¸€çš„å†…å®¹<span class="nt">&lt;/pane&gt;</span>
    <span class="nt">&lt;pane</span> <span class="na">label=</span><span class="s">"æ ‡ç­¾ä¸€"</span> <span class="na">name=</span><span class="s">"2"</span><span class="nt">&gt;</span>æ ‡ç­¾äºŒçš„å†…å®¹<span class="nt">&lt;/pane&gt;</span>
    <span class="nt">&lt;pane</span> <span class="na">label=</span><span class="s">"æ ‡ç­¾ä¸€"</span> <span class="na">name=</span><span class="s">"3"</span><span class="nt">&gt;</span>æ ‡ç­¾ä¸‰çš„å†…å®¹<span class="nt">&lt;/pane&gt;</span>
  <span class="nt">&lt;/tabs&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
    <span class="na">el</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#app</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">activeKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<h2 id="æ­¥éª¤äºŒä¸ºpaneæ ‡ç­¾åœ¨tabsç»„ä»¶ä¸Šå¼€æ§½">æ­¥éª¤äºŒï¼šä¸º<code class="language-plaintext highlighter-rouge">&lt;pane&gt;</code>æ ‡ç­¾åœ¨<code class="language-plaintext highlighter-rouge">tabs</code>ç»„ä»¶ä¸Šå¼€æ§½</h2>

<pre><code class="language-JS">Vue.component('tabs', {
  template: '\
  &lt;div class="tabs"&gt; \
    &lt;div class="tabs-bar"&gt; \
      &lt;!-- æ ‡ç­¾æ ‡é¢˜çš„æ‰€åœ¨ --&gt; \
    &lt;/div&gt; \
    &lt;div class="tabs-content"&gt; \
      &lt;!-- 5 ä¸º&lt;pane&gt;æ ‡ç­¾å¼€æ§½ --&gt;\
      &lt;slot&gt;&lt;/slot&gt; \
    &lt;/div&gt; \
  &lt;/div&gt;',
  data: function() {
    return {
      // å°†æ¥æ”¶åˆ°çš„propsæ•°æ®ä¿å­˜åˆ°ç»„ä»¶è‡ªèº«çš„æ•°æ®ä¸­ï¼Œè¿›è¡Œä¿®æ”¹
      currentValue: this.value
    }
  },
  props: {
    // æ¥æ”¶ä¸Šå±‚é€šè¿‡`v-model`ä¼ é€’è¿‡æ¥çš„æ•°æ®
    value: {
      type: [String, Number]
    }
  }
})
</code></pre>
<h2 id="æ­¥éª¤ä¸‰ä¸ºæ ‡ç­¾æ­£æ–‡å†…å®¹åœ¨paneç»„ä»¶ä¸Šæ’æ§½">æ­¥éª¤ä¸‰ï¼šä¸ºæ ‡ç­¾æ­£æ–‡å†…å®¹åœ¨<code class="language-plaintext highlighter-rouge">pane</code>ç»„ä»¶ä¸Šæ’æ§½</h2>

<pre><code class="language-JS">/* 
  pane-a. åœ¨`pane`ç»„ä»¶ä¸­å¼€æ§½ï¼Œä»è€Œè®©ç»„ä»¶æ ‡ç­¾ä¸­æ’å…¥çš„å†…å®¹â€”â€”æ ‡ç­¾å¯¹åº”çš„æ­£æ–‡å†…å®¹ç›´æ¥æ¸²æŸ“åˆ°æ’æ§½ä¸­
  pane-b. ç”¨ä¸€ä¸ªv-showæ¥æ§åˆ¶ç»„ä»¶å®ä¾‹æ˜¯å¦æ˜¾ç¤º
  pane-c. propsæ¥æ”¶ä¸Šå±‚ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®
*/
// pane-a &amp; pane-b
Vue.component('pane', {
  // nameå±æ€§ä¼šåœ¨æ­¥éª¤å››-éå†tabsçš„childrenç»„ä»¶æ—¶éœ€è¦ç”¨åˆ°
  name: 'pane',
  template: '\
  &lt;div class="pane" v-show="show"&gt; \
    &lt;slot&gt;&lt;/slot&gt;\
  &lt;/div&gt;\',
  data: function() {
    return {
      show: true
    }
  },
  // pane-c
  props: {
    label: {
      type: String,
      default: ''
    },
    name: {
      type: String
    }
  }
})
</code></pre>
<h2 id="æ­¥éª¤å››åœ¨tabsç»„ä»¶é€šè¿‡å­é“¾childrenå»ºç«‹æ ‡ç­¾çš„æ•°ç»„">æ­¥éª¤å››ï¼šåœ¨<code class="language-plaintext highlighter-rouge">tabs</code>ç»„ä»¶é€šè¿‡å­é“¾<code class="language-plaintext highlighter-rouge">$children</code>å»ºç«‹æ ‡ç­¾çš„æ•°ç»„</h2>

<pre><code class="language-JS">//////////////tabs//////////////
Vue.component('tabs', {
  ...,
  methods: {
    getTabs() {
      // éœ€è¦é€šè¿‡é«˜é˜¶å‡½æ•°æ¥æ‰¾åˆ°tabsä¸‹æ‰€æœ‰çš„paneç»„ä»¶ï¼Œé«˜é˜¶å‡½æ•°ä¸­çš„`this`ä¸å†æŒ‡å‘Vueå®ä¾‹ï¼Œå› æ­¤éœ€è¦åœ¨å®ƒçš„å¤–éƒ¨å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼ŒæŒ‡å‘Vueå®ä¾‹
      var _this = this;
      return this.$children.filter(function(item) {
        // é€šè¿‡$optionså¯ä»¥è®¿é—®Vueå®ä¾‹çš„é€‰é¡¹çš„é”®å€¼
        item.$options.name === 'pane';
      })
    }
  }
})
</code></pre>

<h2 id="æ­¥éª¤äº”æ ¹æ®currentvalueè®¾å®španeçš„showå±æ€§ä»è€Œæ§åˆ¶paneå®ä¾‹æ˜¾ç¤ºä¸å¦">æ­¥éª¤äº”ï¼šæ ¹æ®<code class="language-plaintext highlighter-rouge">currentValue</code>ï¼Œè®¾å®š<code class="language-plaintext highlighter-rouge">&lt;pane&gt;</code>çš„<code class="language-plaintext highlighter-rouge">show</code>å±æ€§ï¼Œä»è€Œæ§åˆ¶<code class="language-plaintext highlighter-rouge">pane</code>å®ä¾‹æ˜¾ç¤ºä¸å¦</h2>

<pre><code class="language-JS">Vue.component('tabs', {
  ...,
  methods: {
    ...,
    updateStatus() {
      // è¿”å›æ‰€æœ‰çš„paneç»„ä»¶
      var tabs = this.getTabs();
      var _this = this;
      tabs.forEach(function(tab) {
        return tab.show = tab.name === _this.currentValue;
      })
    }
  }
})
</code></pre>

<h2 id="æ­¥éª¤å…­åœ¨tabsç»„ä»¶çš„navlistæ•°æ®ä¸­æ·»åŠ æ ‡ç­¾å¯¹è±¡å¹¶è¿›è¡Œæ¸²æŸ“">æ­¥éª¤å…­ï¼šåœ¨<code class="language-plaintext highlighter-rouge">tabs</code>ç»„ä»¶çš„<code class="language-plaintext highlighter-rouge">navList</code>æ•°æ®ä¸­æ·»åŠ æ ‡ç­¾å¯¹è±¡ï¼Œå¹¶è¿›è¡Œæ¸²æŸ“</h2>

<h3 id="6-1-åœ¨tabsç»„ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæ•°ç»„ä¼šåŒ…å«ä¸åŒçš„æ ‡ç­¾å¯¹åº”çš„å¯¹è±¡æ ¼å¼çš„å…ƒç´ å›Šæ‹¬äº†æ¯ä¸ªæ ‡ç­¾çš„labelå’Œnameæ•°æ®">6-1 åœ¨<code class="language-plaintext highlighter-rouge">tabs</code>ç»„ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œä¼šåŒ…å«ä¸åŒçš„æ ‡ç­¾å¯¹åº”çš„å¯¹è±¡æ ¼å¼çš„å…ƒç´ ï¼Œå›Šæ‹¬äº†æ¯ä¸ªæ ‡ç­¾çš„<code class="language-plaintext highlighter-rouge">label</code>å’Œ<code class="language-plaintext highlighter-rouge">name</code>æ•°æ®</h3>

<pre><code class="language-JS">Vue.component('tabs', {
  ...,
  data: function() {
    return {
      navList: []
    }
  },
  methods: {
    updateNav() {
      this.navList = [];
      var _this = this;
      this.getTabs.forEach(function(pane, index) {
        _this.navList.push({
          label: pane.label,
          // å¦‚æœæœ‰nameä¿¡æ¯ï¼Œé‚£ä¹ˆå°±ç”¨nameä¿¡æ¯ï¼Œå¦åˆ™å°±ç›´æ¥ç”¨ç´¢å¼•å€¼
          name: pane.name || index
        });
        // é—®é¢˜ï¼Œæˆ‘çš„ç†è§£æ˜¯ä¸‹é¢è¿™ä¸€å¥å’Œä¸Šé¢çš„æ²¡æœ‰åŒºåˆ«
        if (!pane.name) pane.name =  index;
        // å¦‚æœä¹‹å‰æ²¡æœ‰é€šè¿‡v-modelä¼ å…¥valueï¼Œä»è€Œå®šä¹‰é»˜è®¤çš„currentValueï¼Œé‚£ä¹ˆå°±é»˜è®¤è®©indexä¸º0çš„é‚£ä¸ªæ ‡ç­¾æˆä¸ºé»˜è®¤å€¼
        if (index === 0) {
          if (!_this.currentValue) {
            _this.currentValue = pane.name || index;
          }
        }
      });
      // æ ¹æ®currentValueè®¾ç½®æ¯ä¸ªpaneå®ä¾‹å±æ€§showçš„å¸ƒå°”å€¼
      updateStatus();
    }
  }
})
</code></pre>

<h3 id="6-2-æ¸²æŸ“æ ‡ç­¾">6-2 æ¸²æŸ“æ ‡ç­¾</h3>

<p>éœ€è¦åšä¸‰ä»¶äº‹æƒ…ï¼š</p>

<ol>
  <li>
    <p>ä½¿ç”¨<code class="language-plaintext highlighter-rouge">v-for</code>å¯¹<code class="language-plaintext highlighter-rouge">navList</code>è¿›è¡Œéå†ï¼Œå°†<code class="language-plaintext highlighter-rouge">item.label</code>æ¸²æŸ“å‡ºæ¥</p>
  </li>
  <li>
    <p>ç”¨æ•°ç»„è¯­æ³•èµ‹äºˆ<code class="language-plaintext highlighter-rouge">tabs</code> classes</p>
  </li>
  <li>
    <p>å°†ç‚¹å‡»çš„é‚£ä¸€ä¸ªæ ‡ç­¾çš„<code class="language-plaintext highlighter-rouge">name</code>å€¼èµ‹å€¼ç»™<code class="language-plaintext highlighter-rouge">currentValue</code>ï¼Œå¹¶é‡Šæ”¾äº‹ä»¶åˆ°ä¸Šå±‚ï¼Œé€šçŸ¥æ›´æ”¹ã€‚</p>
  </li>
</ol>

<pre><code class="language-JS">Vue.component('tabs', {
  tempalte: '\
  &lt;div class="tabs&gt; \
    &lt;div class="tabs-bar"&gt; \
      &lt;div \
        :class="tabCls(item)" \
        :v-for="(item, index) in navList" \
        @click="handleChange(index)" \
      &gt;&lt;/div&gt;\
    &lt;/div&gt; \
    &lt;div class="tabs-content"&gt; \
      &lt;slot&gt;&lt;/slot&gt; \
    &lt;/div&gt; \
  &lt;/div&gt;',
  ...
})
</code></pre>

<h4 id="6-2-1-ä½¿ç”¨æ•°ç»„è¯­æ³•ç»‘å®šæ ‡ç­¾classå±æ€§">6-2-1 ä½¿ç”¨æ•°ç»„è¯­æ³•ç»‘å®šæ ‡ç­¾<code class="language-plaintext highlighter-rouge">class</code>å±æ€§</h4>

<pre><code class="language-JS">Vue.component('tabs', {
  ...,
  methods: {
    tabCls(item) {
      return [
        'tabs-tab',
        {
          'tabs-tab-active': item.name === this.currentValue;
        }
      ]
    }
  }
})
</code></pre>

<h4 id="6-2-2-ç‚¹å‡»äº‹ä»¶æ›´æ–°currentvalueå€¼å¹¶é€šçŸ¥ä¸Šå±‚ç»„ä»¶">6-2-2 ç‚¹å‡»äº‹ä»¶æ›´æ–°<code class="language-plaintext highlighter-rouge">currentValue</code>å€¼ï¼Œå¹¶é€šçŸ¥ä¸Šå±‚ç»„ä»¶</h4>

<pre><code class="language-JS">Vue.component('tabs', {
  ...,
  methods: {
    handleChange(index) {
      var nav = navList[index];
      var name = nav.name
      this.currentValue = name;
      this.$emit('input', name);
      // è¿™ä¸ªon-clickæ˜¯ç”±è°æ•æ‰çš„ï¼Œä»€ä¹ˆç”¨ï¼Ÿä¹‹å‰ç»ƒä¹ 1çš„on-changeä¹Ÿç±»ä¼¼ï¼Œä¹Ÿä¸æ˜¯å¾ˆæ˜ç™½ä»€ä¹ˆä½œç”¨
      this.$emit('on-click', name);
    }
  }
})
</code></pre>
<h2 id="æ­¥éª¤-7watch-ä¸æ‡‚watchçš„æ—¶æœº">æ­¥éª¤ 7ï¼šWatch (ä¸æ‡‚watchçš„æ—¶æœº)</h2>

<h3 id="æ­¥éª¤-7-1tabsç»„ä»¶çš„-watch">æ­¥éª¤ 7-1ï¼š<code class="language-plaintext highlighter-rouge">tabs</code>ç»„ä»¶çš„ watch</h3>

<p>watch ä¸¤ä¸ªå€¼ï¼š</p>

<ul>
  <li>
    <p>ä¸Šå±‚ç»„ä»¶é€šè¿‡<code class="language-plaintext highlighter-rouge">v-model</code>ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯<code class="language-plaintext highlighter-rouge">value</code></p>
  </li>
  <li>
    <p>è‡ªèº«çš„<code class="language-plaintext highlighter-rouge">currentValue</code>çš„å€¼</p>
  </li>
</ul>

<pre><code class="language-JS">Vue.component('tabs', {
  ...,
  watch: {
    value: function(val) {
      this.currentValue = val;
    },
    // è‡ªèº«currentValueå˜åŒ–æ—¶ï¼Œéœ€è¦æ›´æ–°æ‰€æœ‰ä¸‹å±‚`pane`ç»„ä»¶çš„showå±æ€§çš„å¸ƒå°”å€¼ï¼Œä»è€Œå¯¹ DOM è¿›è¡Œé‡æ–°æ¸²æŸ“
    currentValue: function() {
      this.updateStatus();
    }
  }
})
</code></pre>

<h3 id="æ­¥éª¤7-2paneç»„ä»¶çš„-watch">æ­¥éª¤7-2ï¼š<code class="language-plaintext highlighter-rouge">pane</code>ç»„ä»¶çš„ watch</h3>

<p>éšç€æ¯æ¬¡ç‚¹å‡»äº‹ä»¶ï¼Œéƒ½è¦ä¼´éš<code class="language-plaintext highlighter-rouge">label</code>çš„æ›´æ–°ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡çˆ¶é“¾$parentæ¥è°ƒç”¨çˆ¶ç»„ä»¶çš„æ–¹æ³•</p>

<pre><code class="language-JS">Vue.component('pane', {
  ...,
  methods: {
    updateNav() {
      this.$parent.updateNav();
    }
  },
  watch: {
    label() {
      this.updateNav();
    }
  },
  mounted: {
    this.updateNav();
  }
})
</code></pre>

<p><a href="https://cn.vuejs.org/v2/guide/computed.html">è®¡ç®—å±æ€§ä¸ä¾¦å¬å®˜æ–¹è¯´æ˜</a></p>
:ET